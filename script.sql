--Cria o Banco
CREATE DATABASE LOJA

--Scripts DDL
USE LOJA

CREATE TABLE CLIENTE (
	ID INT NOT NULL PRIMARY KEY,
	NOME NVARCHAR(MAX)
);


CREATE TABLE PEDIDO (
	ID INT NOT NULL PRIMARY KEY,
	DATAPEDIDO DATETIME,
	TOTAL REAL
);

CREATE TABLE PRODUTO (
	ID INT NOT NULL PRIMARY KEY,
	NOME NVARCHAR(MAX)
);

CREATE TABLE CLIENTEPEDIDO (
	ID INT NOT NULL, 
	CLIENTE INT,
	PEDIDO INT,

	CONSTRAINT PK_CLIENTEPEDIDO PRIMARY KEY (ID),
	CONSTRAINT FK_CLIENTEPEDIDO2 FOREIGN KEY (CLIENTE)
						REFERENCES CLIENTE (ID),
	CONSTRAINT FK_CLIENTEPEDIDO3 FOREIGN KEY (PEDIDO)
						REFERENCES PEDIDO (ID)
);

CREATE TABLE PEDIDOPRODUTO (
	ID INT NOT NULL,
	PEDIDO INT ,
	PRODUTO INT

	CONSTRAINT PK_PEIDOPRODUTO PRIMARY KEY (ID),
	CONSTRAINT FK_PEDIDOPRODUTO2 FOREIGN KEY (PEDIDO)
						REFERENCES PEDIDO (ID),
	CONSTRAINT FK_PEDIDOPRODUTO3 FOREIGN KEY (PRODUTO)
						REFERENCES PRODUTO (ID)
);


--Script para criação do usuario local
USE MASTER
GO
CREATE LOGIN larissa 
	WITH PASSWORD=N'123456', 
	DEFAULT_DATABASE=[master], 
	CHECK_EXPIRATION=OFF, 
	CHECK_POLICY=OFF
GO
USE LOJA
GO
CREATE USER larissa FOR LOGIN larissa
GO
USE LOJA
GO
EXEC sp_addrolemember N'db_owner', N'larissa'
GO


--Script de insercao de dados

use LOJA

INSERT INTO CLIENTE VALUES ('1','Larissa');
INSERT INTO CLIENTE VALUES ('2','Pedro');
INSERT INTO CLIENTE VALUES ('3','Beatriz');
INSERT INTO CLIENTE VALUES ('4','Jessica');
INSERT INTO CLIENTE VALUES ('5','Ana');

INSERT INTO PEDIDO VALUES ('1','08-08-2021 09:45:09 AM','252.20');
INSERT INTO PEDIDO VALUES ('2','08-08-2021 09:45:19 AM','50.00');
INSERT INTO PEDIDO VALUES ('3','08-08-2021 09:45:09 AM','98.00');
INSERT INTO PEDIDO VALUES ('4','08-08-2021 09:55:09 AM','78.99');
INSERT INTO PEDIDO VALUES ('5','10-10-2021 03:40:09 PM','35.35');

INSERT INTO PRODUTO VALUES ('1','Sapato');
INSERT INTO PRODUTO VALUES ('2','Blusa');
INSERT INTO PRODUTO VALUES ('3','Bermuda');
INSERT INTO PRODUTO VALUES ('4','Sandália');
INSERT INTO PRODUTO VALUES ('5','Vestido');

INSERT INTO CLIENTEPEDIDO VALUES ('1','1','1');
INSERT INTO CLIENTEPEDIDO VALUES ('2','2','2');
INSERT INTO CLIENTEPEDIDO VALUES ('3','3','3');
INSERT INTO CLIENTEPEDIDO VALUES ('4','4','4');
INSERT INTO CLIENTEPEDIDO VALUES ('5','5','5');

INSERT INTO PEDIDOPRODUTO VALUES ('1','1','1');
INSERT INTO PEDIDOPRODUTO VALUES ('2','2','2');
INSERT INTO PEDIDOPRODUTO VALUES ('3','3','3');
INSERT INTO PEDIDOPRODUTO VALUES ('4','4','4');
INSERT INTO PEDIDOPRODUTO VALUES ('5','5','5');
